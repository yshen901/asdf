"use strict";var ApplicationList,ApplicationPage,ApplicationInstance,ApplicationContext,Q=require("q"),_=require("lodash"),util=require("util"),Page=require("../../../../base/Page"),deserialize=require("../../../../base/deserialize"),serialize=require("../../../../base/serialize"),values=require("../../../../base/values");ApplicationList=function(t,i){function e(t){return e.get(t)}return e._version=t,e._solution={accountSid:i},e._uri=`/Accounts/${i}/Applications.json`,e.create=function(t,i){_.isFunction(t)&&(i=t,t={}),t=t||{};var e=Q.defer(),o=values.of({ApiVersion:_.get(t,"apiVersion"),VoiceUrl:_.get(t,"voiceUrl"),VoiceMethod:_.get(t,"voiceMethod"),VoiceFallbackUrl:_.get(t,"voiceFallbackUrl"),VoiceFallbackMethod:_.get(t,"voiceFallbackMethod"),StatusCallback:_.get(t,"statusCallback"),StatusCallbackMethod:_.get(t,"statusCallbackMethod"),VoiceCallerIdLookup:serialize.bool(_.get(t,"voiceCallerIdLookup")),SmsUrl:_.get(t,"smsUrl"),SmsMethod:_.get(t,"smsMethod"),SmsFallbackUrl:_.get(t,"smsFallbackUrl"),SmsFallbackMethod:_.get(t,"smsFallbackMethod"),SmsStatusCallback:_.get(t,"smsStatusCallback"),MessageStatusCallback:_.get(t,"messageStatusCallback"),FriendlyName:_.get(t,"friendlyName")}),n=this._version.create({uri:this._uri,method:"POST",data:o});return(n=n.then(function(t){e.resolve(new ApplicationInstance(this._version,t,this._solution.accountSid,this._solution.sid))}.bind(this)))["catch"](function(t){e.reject(t)}),_.isFunction(i)&&e.promise.nodeify(i),e.promise},e.each=function(t,i){function e(i){n=!0,_.isFunction(t.done)&&t.done(i)}function o(a){var c=a();_.isUndefined(c)?e():(c.then(function(a){_.each(a.instances,function(o){if(n||!_.isUndefined(t.limit)&&s>=t.limit)return n=!0,!1;s++,i(o,e)}),n?e():(0,o(_.bind(a.nextPage,a)))}),c["catch"](e))}if(_.isFunction(t)&&(i=t,t={}),(t=t||{}).callback&&(i=t.callback),_.isUndefined(i))throw new Error("Callback function must be provided");var n=!1,s=0,a=this._version.readLimits({limit:t.limit,pageSize:t.pageSize});o(_.bind(this.page,this,_.merge(t,a)))},e.list=function(t,i){_.isFunction(t)&&(i=t,t={}),t=t||{};var e=Q.defer(),o=[];return t.callback=function(i,e){o.push(i),_.isUndefined(t.limit)||o.length!==t.limit||e()},t.done=function(t){_.isUndefined(t)?e.resolve(o):e.reject(t)},_.isFunction(i)&&e.promise.nodeify(i),this.each(t),e.promise},e.page=function(t,i){_.isFunction(t)&&(i=t,t={}),t=t||{};var e=Q.defer(),o=values.of({FriendlyName:_.get(t,"friendlyName"),PageToken:t.pageToken,Page:t.pageNumber,PageSize:t.pageSize}),n=this._version.page({uri:this._uri,method:"GET",params:o});return(n=n.then(function(t){e.resolve(new ApplicationPage(this._version,t,this._solution))}.bind(this)))["catch"](function(t){e.reject(t)}),_.isFunction(i)&&e.promise.nodeify(i),e.promise},e.getPage=function(t,i){var e=Q.defer(),o=this._version._domain.twilio.request({method:"GET",uri:t});return(o=o.then(function(t){e.resolve(new ApplicationPage(this._version,t,this._solution))}.bind(this)))["catch"](function(t){e.reject(t)}),_.isFunction(i)&&e.promise.nodeify(i),e.promise},e.get=function(t){return new ApplicationContext(this._version,this._solution.accountSid,t)},e.toJSON=function(){return this._solution},e[util.inspect.custom]=function(t,i){return util.inspect(this.toJSON(),i)},e},ApplicationPage=function(t,i,e){this._solution=e,Page.prototype.constructor.call(this,t,i,this._solution)},_.extend(ApplicationPage.prototype,Page.prototype),ApplicationPage.prototype.constructor=ApplicationPage,ApplicationPage.prototype.getInstance=function(t){return new ApplicationInstance(this._version,t,this._solution.accountSid)},ApplicationPage.prototype.toJSON=function(){let t={};return _.forOwn(this,function(i,e){_.startsWith(e,"_")||_.isFunction(i)||(t[e]=i)}),t},ApplicationPage.prototype[util.inspect.custom]=function(t,i){return util.inspect(this.toJSON(),i)},ApplicationInstance=function(t,i,e,o){this._version=t,this.accountSid=i.account_sid,this.apiVersion=i.api_version,this.dateCreated=deserialize.rfc2822DateTime(i.date_created),this.dateUpdated=deserialize.rfc2822DateTime(i.date_updated),this.friendlyName=i.friendly_name,this.messageStatusCallback=i.message_status_callback,this.sid=i.sid,this.smsFallbackMethod=i.sms_fallback_method,this.smsFallbackUrl=i.sms_fallback_url,this.smsMethod=i.sms_method,this.smsStatusCallback=i.sms_status_callback,this.smsUrl=i.sms_url,this.statusCallback=i.status_callback,this.statusCallbackMethod=i.status_callback_method,this.uri=i.uri,this.voiceCallerIdLookup=i.voice_caller_id_lookup,this.voiceFallbackMethod=i.voice_fallback_method,this.voiceFallbackUrl=i.voice_fallback_url,this.voiceMethod=i.voice_method,this.voiceUrl=i.voice_url,this._context=undefined,this._solution={accountSid:e,sid:o||this.sid}},Object.defineProperty(ApplicationInstance.prototype,"_proxy",{get:function(){return this._context||(this._context=new ApplicationContext(this._version,this._solution.accountSid,this._solution.sid)),this._context}}),ApplicationInstance.prototype.remove=function(t){return this._proxy.remove(t)},ApplicationInstance.prototype.fetch=function(t){return this._proxy.fetch(t)},ApplicationInstance.prototype.update=function(t,i){return this._proxy.update(t,i)},ApplicationInstance.prototype.toJSON=function(){let t={};return _.forOwn(this,function(i,e){_.startsWith(e,"_")||_.isFunction(i)||(t[e]=i)}),t},ApplicationInstance.prototype[util.inspect.custom]=function(t,i){return util.inspect(this.toJSON(),i)},(ApplicationContext=function(t,i,e){this._version=t,this._solution={accountSid:i,sid:e},this._uri=`/Accounts/${i}/Applications/${e}.json`}).prototype.remove=function(t){var i=Q.defer(),e=this._version.remove({uri:this._uri,method:"DELETE"});return(e=e.then(function(t){i.resolve(t)}.bind(this)))["catch"](function(t){i.reject(t)}),_.isFunction(t)&&i.promise.nodeify(t),i.promise},ApplicationContext.prototype.fetch=function(t){var i=Q.defer(),e=this._version.fetch({uri:this._uri,method:"GET"});return(e=e.then(function(t){i.resolve(new ApplicationInstance(this._version,t,this._solution.accountSid,this._solution.sid))}.bind(this)))["catch"](function(t){i.reject(t)}),_.isFunction(t)&&i.promise.nodeify(t),i.promise},ApplicationContext.prototype.update=function(t,i){_.isFunction(t)&&(i=t,t={}),t=t||{};var e=Q.defer(),o=values.of({FriendlyName:_.get(t,"friendlyName"),ApiVersion:_.get(t,"apiVersion"),VoiceUrl:_.get(t,"voiceUrl"),VoiceMethod:_.get(t,"voiceMethod"),VoiceFallbackUrl:_.get(t,"voiceFallbackUrl"),VoiceFallbackMethod:_.get(t,"voiceFallbackMethod"),StatusCallback:_.get(t,"statusCallback"),StatusCallbackMethod:_.get(t,"statusCallbackMethod"),VoiceCallerIdLookup:serialize.bool(_.get(t,"voiceCallerIdLookup")),SmsUrl:_.get(t,"smsUrl"),SmsMethod:_.get(t,"smsMethod"),SmsFallbackUrl:_.get(t,"smsFallbackUrl"),SmsFallbackMethod:_.get(t,"smsFallbackMethod"),SmsStatusCallback:_.get(t,"smsStatusCallback"),MessageStatusCallback:_.get(t,"messageStatusCallback")}),n=this._version.update({uri:this._uri,method:"POST",data:o});return(n=n.then(function(t){e.resolve(new ApplicationInstance(this._version,t,this._solution.accountSid,this._solution.sid))}.bind(this)))["catch"](function(t){e.reject(t)}),_.isFunction(i)&&e.promise.nodeify(i),e.promise},ApplicationContext.prototype.toJSON=function(){return this._solution},ApplicationContext.prototype[util.inspect.custom]=function(t,i){return util.inspect(this.toJSON(),i)},module.exports={ApplicationList:ApplicationList,ApplicationPage:ApplicationPage,ApplicationInstance:ApplicationInstance,ApplicationContext:ApplicationContext};